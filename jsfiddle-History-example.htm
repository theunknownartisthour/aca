
<!-- saved from url=(0040)http://jsfiddle.net/dansalmo/Vwujy/show/ -->
<html><body><div class="webkit-line-gutter-backdrop"></div><table><tbody><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-doctype">&lt;!DOCTYPE html&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;html&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;head&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;meta <span class="webkit-html-attribute-name">http-equiv</span>="<span class="webkit-html-attribute-value">content-type</span>" <span class="webkit-html-attribute-name">content</span>="<span class="webkit-html-attribute-value">text/html; charset=UTF-8</span>"&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;title&gt;</span>History.js - jsFiddle demo by dansalmo<span class="webkit-html-tag">&lt;/title&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;script <span class="webkit-html-attribute-name">type</span>='<span class="webkit-html-attribute-value">text/javascript</span>' <span class="webkit-html-attribute-name">src</span>='<a class="webkit-html-attribute-value webkit-html-resource-link" target="_blank" href="http://code.jquery.com/jquery-1.8.2.js">http://code.jquery.com/jquery-1.8.2.js</a>'&gt;</span><span class="webkit-html-tag">&lt;/script&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;link <span class="webkit-html-attribute-name">rel</span>="<span class="webkit-html-attribute-value">stylesheet</span>" <span class="webkit-html-attribute-name">type</span>="<span class="webkit-html-attribute-value">text/css</span>" <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-resource-link" target="_blank" href="http://jsfiddle.net/css/normalize.css">/css/normalize.css</a>"&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;link <span class="webkit-html-attribute-name">rel</span>="<span class="webkit-html-attribute-value">stylesheet</span>" <span class="webkit-html-attribute-name">type</span>="<span class="webkit-html-attribute-value">text/css</span>" <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-resource-link" target="_blank" href="http://jsfiddle.net/css/result-light.css">/css/result-light.css</a>"&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      <span class="webkit-html-tag">&lt;script <span class="webkit-html-attribute-name">type</span>='<span class="webkit-html-attribute-value">text/javascript</span>' <span class="webkit-html-attribute-name">src</span>="<a class="webkit-html-attribute-value webkit-html-resource-link" target="_blank" href="http://balupton.github.com/history.js/scripts/bundled/html4+html5/jquery.history.js">http://balupton.github.com/history.js/scripts/bundled/html4+html5/jquery.history.js</a>"&gt;</span><span class="webkit-html-tag">&lt;/script&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;style <span class="webkit-html-attribute-name">type</span>='<span class="webkit-html-attribute-value">text/css</span>'&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    .hidden {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">display: none;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">visibility: hidden;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">}</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;/style&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;script <span class="webkit-html-attribute-name">type</span>='<span class="webkit-html-attribute-value">text/javascript</span>'&gt;</span>//&lt;![CDATA[ </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">$(function(){</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">var History = window.History;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">if (History.enabled) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    State = History.getState();</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    // set initial state to first page that was loaded</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    // use window.location.pathname() instead of '/home' when not on jsfiddle</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    History.pushState({urlPath: '/home'}, $("title").text(), State.urlPath);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">} else {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    return false;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">}</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">var loadAjaxContent = function(urlBase, selector) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    var urlBase = '/gh/get/response.html/dansalmo/jsfiddle-ajax-host/tree/master/Demo/'; // remove when not on jsfiddle</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    $('#content').load(urlBase + ' ' + selector);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">};</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">var updateContent = function(State) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    var selector = '#' + State.data.urlPath.substring(1);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    if ($(selector).length) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        //content is already hidden in page</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        $('#content').appendTo('#hidden_content');</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        $(selector).appendTo('#content');</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    } else {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        loadAjaxContent(State.url, selector);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">};</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">// Content update and back/forward button handler</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">History.Adapter.bind(window, 'statechange', function() {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    updateContent(History.getState());</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">});</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">// navigation link handler</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">$('body').on('click', 'a', function(e) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    var urlPath = $(this).attr('href');</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    var title = $(this).text();</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    History.pushState({urlPath: urlPath}, title, urlPath);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    return false; // prevents default click action of &lt;a ...&gt;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">});</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">});//]]&gt;  </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;/script&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;/head&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;body&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;a <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://jsfiddle.net/home">/home</a>"&gt;</span>Home<span class="webkit-html-tag">&lt;/a&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;a <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://jsfiddle.net/about">/about</a>"&gt;</span>About<span class="webkit-html-tag">&lt;/a&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;a <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://jsfiddle.net/contact">/contact</a>"&gt;</span>Contact<span class="webkit-html-tag">&lt;/a&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;a <span class="webkit-html-attribute-name">href</span>="<a class="webkit-html-attribute-value webkit-html-external-link" target="_blank" href="http://jsfiddle.net/other">/other</a>"&gt;</span>Other<span class="webkit-html-tag">&lt;/a&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;p&gt;</span>The whole page will not re-load when the content below is updated, yet the URL is clean and the back button works!<span class="webkit-html-tag">&lt;p&gt;</span><span class="webkit-html-tag">&lt;br /&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;div <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">content</span>"&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;div <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">home</span>"&gt;</span>Home Page content<span class="webkit-html-tag">&lt;/div&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;/div&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;div <span class="webkit-html-attribute-name">class</span>="<span class="webkit-html-attribute-value">hidden</span>" <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">ajax_content</span>"&gt;</span><span class="webkit-html-tag">&lt;/div&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    <span class="webkit-html-tag">&lt;br /&gt;</span><span class="webkit-html-tag">&lt;p&gt;</span>The content div will be updated with a selected div fragment from an HTML file hosted on github, however the broswer will see each content update request as a part of the page history so that the back button can be used.<span class="webkit-html-tag">&lt;/p&gt;</span><span class="webkit-html-tag">&lt;br  /&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;p&gt;</span>Adding more menu items is as simple as adding the new links and their corresponding html fragments.<span class="webkit-html-tag">&lt;p&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;div <span class="webkit-html-attribute-name">class</span>="<span class="webkit-html-attribute-value">hidden</span>" <span class="webkit-html-attribute-name">id</span>="<span class="webkit-html-attribute-value">hidden_content</span>"&gt;</span><span class="webkit-html-tag">&lt;/div&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;/body&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;/html&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"></td></tr></tbody></table></body></html>